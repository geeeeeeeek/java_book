<template>  <div>    <!--页面区域-->    <div class="page-view">      <a-table        size="middle"        rowKey="id"        :loading="data.loading"        :columns="columns"        :data-source="data.tagList"        :scroll="{ x: 'max-content' }"        :pagination="{          size: 'default',          current: data.page,          pageSize: data.pageSize,          onChange: (current) => (data.page = current),          showSizeChanger: false,          showTotal: (total) => `共${total}条数据`,        }"      >        <template #bodyCell="{ text, record, index, column }">          <template v-if="column.key === 'status'">            <a-tag :color="text === '1'? '#2db7f5':'#87d068'">              {{text === '1'? '在借': text === '2'? '已还':'--'}}            </a-tag>          </template>          <template v-if="column.key === 'operation'">            <span>              <a-popconfirm title="确定还书?" ok-text="是" cancel-text="否" @confirm="confirmReturnBorrow(record)">                <a>还书</a>              </a-popconfirm>              <a-divider type="vertical" />              <a-popconfirm title="确定延期?" ok-text="是" cancel-text="否" @confirm="confirmDelayBorrow(record)">                <a>延期</a>              </a-popconfirm>            </span>          </template>        </template>      </a-table>    </div>  </div></template><script setup lang="ts">  import { FormInstance, message } from 'ant-design-vue';  import { createApi, listApi, returnBorrowApi, delayBorrowApi} from '/@/api/borrow';  import {getFormatTime} from "/@/utils";  const columns = reactive([    {      title: '序号',      dataIndex: 'index',      key: 'index',      align: 'center'    },    {      title: '借阅人',      dataIndex: 'username',      key: 'username',      align: 'center'    },    {      title: '图书',      dataIndex: 'title',      key: 'title',      align: 'center',    },    {      title: '状态',      dataIndex: 'status',      key: 'status',      align: 'center',      scopedSlots: {customRender: 'status'}    },    {      title: '借阅时间',      dataIndex: 'borrowTime',      key: 'borrowTime',      align: 'center',      customRender: ({text}) => getFormatTime(text, true)    },    {      title: '应还时间',      dataIndex: 'expectTime',      key: 'expectTime',      align: 'center',      customRender: ({text}) => getFormatTime(text, true)    },    {      title: '操作',      dataIndex: 'action',      key: 'operation',      align: 'center',      fixed: 'right',      width: 120,    },  ]);  // 页面数据  const data = reactive({    tagList: [],    loading: false,    keyword: '',    selectedRowKeys: [] as any[],    pageSize: 10,    page: 1,  });  onMounted(() => {    getDataList();  });  const getDataList = () => {    data.loading = true;    listApi({      keyword: data.keyword,    })      .then((res) => {        data.loading = false;        console.log(res);        res.data.forEach((item: any, index: any) => {          item.index = index + 1;        });        data.tagList = res.data;      })      .catch((err) => {        data.loading = false;        console.log(err);      });  };  const rowSelection = ref({    onChange: (selectedRowKeys: (string | number)[], selectedRows: DataItem[]) => {      console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);      data.selectedRowKeys = selectedRowKeys;    },  });  const confirmReturnBorrow = (record: any) => {    returnBorrowApi({      id: record.id    }).then(res=>{      getDataList()      message.success('操作成功');    }).catch(err=>{      message.warn(err.msg || '操作失败');    })  };  const confirmDelayBorrow = (record: any) => {    delayBorrowApi({      id: record.id    }).then(res=>{      getDataList()      message.success('操作成功');    }).catch(err=>{      message.warn(err.msg || '操作失败');    })  };  const handleAdd = () => {  }</script><style scoped lang="less">  .page-view {    min-height: 100%;    background: #fff;    padding: 24px;    display: flex;    flex-direction: column;  }  .table-operations {    margin-bottom: 16px;    text-align: right;  }  .table-operations > button {    margin-right: 8px;  }</style>